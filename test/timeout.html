<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>when/timeout Unit Tests</title>
	<script src="util/doh/runner.js"></script>
	<script src="test-config.js"></script>
	<script src="../when.js"></script>
	<script src="../timeout.js"></script>
	<script>

		(function(global, doh, async) {

			var timeout = when_timeout;

			doh.register('when/timeout', [
				function testTimeoutRejects() {
					return async.assertRejected(timeout(when.defer(), 0));
				},
				function testTimeoutRejectsImmediately() {
					var d = when.defer();
					d.reject(1);

					return async.assertRejected(timeout(d, 0), 1);
				},
				function testTimeoutResolvesImmediately() {
					var d = when.defer();
					d.resolve(1);

					return async.assertResolved(timeout(d, 0), 1);
				}

			]);

			doh.run();

		})(window, doh, doh.asyncHelper);
	</script>
</head>
<body>

</body>
</html>